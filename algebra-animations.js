!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=4)}([function(t,e){var i=4,n=.001,o=1e-7,r=10,a=11,s=1/(a-1),h="function"==typeof Float32Array;function c(t,e){return 1-3*e+3*t}function u(t,e){return 3*e-6*t}function l(t){return 3*t}function p(t,e,i){return((c(e,i)*t+u(e,i))*t+l(e))*t}function f(t,e,i){return 3*c(e,i)*t*t+2*u(e,i)*t+l(e)}function d(t){return t}t.exports=function(t,e,c,u){if(!(0<=t&&t<=1&&0<=c&&c<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&c===u)return d;for(var l=h?new Float32Array(a):new Array(a),g=0;g<a;++g)l[g]=p(g*s,t,c);function y(e){for(var h=0,u=1,d=a-1;u!==d&&l[u]<=e;++u)h+=s;var g=h+(e-l[--u])/(l[u+1]-l[u])*s,y=f(g,t,c);return y>=n?function(t,e,n,o){for(var r=0;r<i;++r){var a=f(e,n,o);if(0===a)return e;e-=(p(e,n,o)-t)/a}return e}(e,g,t,c):0===y?g:function(t,e,i,n,a){var s,h,c=0;do{(s=p(h=e+(i-e)/2,n,a)-t)>0?i=h:e=h}while(Math.abs(s)>o&&++c<r);return h}(e,h,h+s,t,c)}return function(t){return 0===t?0:1===t?1:p(y(t),e,u)}}},function(t,e,i){var n;!function(){function o(t,e,i){return t.call.apply(t.bind,arguments)}function r(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function a(t,e,i){return(a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:r).apply(null,arguments)}var s=Date.now||function(){return+new Date};function h(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var c=!!window.FontFace;function u(t,e,i,n){if(e=t.c.createElement(e),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?e.style.cssText=i[o]:e.setAttribute(o,i[o]));return n&&e.appendChild(t.c.createTextNode(n)),e}function l(t,e,i){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var r=!1,a=0;a<n.length;a+=1)if(e[o]===n[a]){r=!0;break}r||n.push(e[o])}for(e=[],o=0;o<n.length;o+=1){for(r=!1,a=0;a<i.length;a+=1)if(n[o]===i[a]){r=!0;break}r||e.push(n[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var i=t.className.split(/\s+/),n=0,o=i.length;n<o;n++)if(i[n]==e)return!0;return!1}function g(t,e,i){function n(){s&&o&&r&&(s(a),s=null)}e=u(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,r=!0,a=null,s=i||null;c?(e.onload=function(){o=!0,n()},e.onerror=function(){o=!0,a=Error("Stylesheet failed to load"),n()}):setTimeout(function(){o=!0,n()},0),l(t,"head",e)}function y(t,e,i,n){var o=t.c.getElementsByTagName("head")[0];if(o){var r=u(t,"script",{src:e}),a=!1;return r.onload=r.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&o.removeChild(r))},o.appendChild(r),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),r}return null}function v(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,x(t)}}function w(t,e){t.c=e,x(t)}function x(t){0==t.a&&t.c&&(t.c(),t.c=null)}function _(t){this.a=t||"-"}function S(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function b(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function C(t){return t.a+t.f}function O(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function k(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function P(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new _("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function T(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),f(t.f,i,n)}E(t,"inactive")}function E(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,C(i)):t.h[e]())}function A(){this.c={}}function H(t,e){this.c=t,this.f=e,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function j(t){l(t.c,"body",t.a)}function I(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(t.c)+";font-style:"+O(t)+";font-weight:"+t.f+"00;"}function W(t,e,i,n,o,r){this.g=t,this.j=e,this.a=n,this.c=i,this.f=o||3e3,this.h=r||void 0}function L(t,e,i,n,o,r,a){this.v=t,this.B=e,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=o||3e3,this.u=r||null,this.m=this.j=this.h=this.g=null,this.g=new H(this.c,this.s),this.h=new H(this.c,this.s),this.j=new H(this.c,this.s),this.m=new H(this.c,this.s),t=I(t=new S(this.a.c+",serif",C(this.a))),this.g.a.style.cssText=t,t=I(t=new S(this.a.c+",sans-serif",C(this.a))),this.h.a.style.cssText=t,t=I(t=new S("serif",C(this.a))),this.j.a.style.cssText=t,t=I(t=new S("sans-serif",C(this.a))),this.m.a.style.cssText=t,j(this.g),j(this.h),j(this.j),j(this.m)}_.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},W.prototype.start=function(){var t=this.c.o.document,e=this,i=s(),n=new Promise(function(n,o){!function r(){s()-i>=e.f?o():t.fonts.load(function(t){return O(t)+" "+t.f+"00 300px "+b(t.c)}(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(r,25)},function(){o()})}()}),o=null,r=new Promise(function(t,i){o=setTimeout(i,e.f)});Promise.race([r,n]).then(function(){o&&(clearTimeout(o),o=null),e.g(e.a)},function(){e.j(e.a)})};var z={D:"serif",C:"sans-serif"},M=null;function D(){if(null===M){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);M=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return M}function N(t,e,i){for(var n in z)if(z.hasOwnProperty(n)&&e===t.f[z[n]]&&i===t.f[z[n]])return!0;return!1}function R(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=D()&&N(t,i,n)),e?s()-t.A>=t.w?D()&&N(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):function(t){setTimeout(a(function(){R(this)},t),50)}(t):F(t,t.v)}function F(t,e){setTimeout(a(function(){p(this.g.a),p(this.h.a),p(this.j.a),p(this.m.a),e(this.a)},t),0)}function B(t,e,i){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=i}L.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),R(this)};var X=null;function U(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&f(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),E(t,"active")):T(t.a))}function Y(t){this.j=t,this.a=new A,this.h=0,this.f=this.g=!0}function q(t,e,i,n,o){var r=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=o||null,s=n||{};if(0===i.length&&r)T(e.a);else{e.f+=i.length,r&&(e.j=r);var h,c=[];for(h=0;h<i.length;h++){var u=i[h],l=s[u.c],p=e.a,d=u;if(p.g&&f(p.f,[p.a.c("wf",d.c,C(d).toString(),"loading")]),E(p,"fontloading",d),p=null,null===X)if(window.FontFace){d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);X=d?42<parseInt(d[1],10):!g}else X=!1;p=X?new W(a(e.g,e),a(e.h,e),e.c,u,e.s,l):new L(a(e.g,e),a(e.h,e),e.c,u,e.s,t,l),c.push(p)}for(h=0;h<c.length;h++)c[h].start()}},0)}function V(t,e){this.c=t,this.a=e}function Z(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||J,this.a=[],this.f=[],this.g=e||""}B.prototype.g=function(t){var e=this.a;e.g&&f(e.f,[e.a.c("wf",t.c,C(t).toString(),"active")],[e.a.c("wf",t.c,C(t).toString(),"loading"),e.a.c("wf",t.c,C(t).toString(),"inactive")]),E(e,"fontactive",t),this.m=!0,U(this)},B.prototype.h=function(t){var e=this.a;if(e.g){var i=d(e.f,e.a.c("wf",t.c,C(t).toString(),"active")),n=[],o=[e.a.c("wf",t.c,C(t).toString(),"loading")];i||n.push(e.a.c("wf",t.c,C(t).toString(),"inactive")),f(e.f,n,o)}E(e,"fontinactive",t),U(this)},Y.prototype.load=function(t){this.c=new h(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,i){var n=[],o=i.timeout;!function(t){t.g&&f(t.f,[t.a.c("wf","loading")]),E(t,"loading")}(e);var n=function(t,e,i){var n,o=[];for(n in e)if(e.hasOwnProperty(n)){var r=t.c[n];r&&o.push(r(e[n],i))}return o}(t.a,i,t.c),r=new B(t.c,e,o);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load(function(e,i,n){q(t,r,e,i,n)})}(this,new P(this.c,t),t)},V.prototype.load=function(t){var e=this,i=e.a.projectId,n=e.a.version;if(i){var o=e.c.o;y(this.c,(e.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(n?"?v="+n:""),function(n){n?t([]):(o["__MonotypeConfiguration__"+i]=function(){return e.a},function e(){if(o["__mti_fntLst"+i]){var n,r=o["__mti_fntLst"+i](),a=[];if(r)for(var s=0;s<r.length;s++){var h=r[s].fontfamily;null!=r[s].fontStyle&&null!=r[s].fontWeight?(n=r[s].fontStyle+r[s].fontWeight,a.push(new S(h,n))):a.push(new S(h))}t(a)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+i}else t([])},Z.prototype.load=function(t){var e,i,n=this.a.urls||[],o=this.a.families||[],r=this.a.testStrings||{},a=new v;for(e=0,i=n.length;e<i;e++)g(this.c,n[e],m(a));var s=[];for(e=0,i=o.length;e<i;e++)if((n=o[e].split(":"))[1])for(var h=n[1].split(","),c=0;c<h.length;c+=1)s.push(new S(n[0],h[c]));else s.push(new S(n[0]));w(a,function(){t(s,r)})};var J="https://fonts.googleapis.com/css";function G(t){this.f=t,this.a=[],this.c={}}var $={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},Q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function it(t,e){this.c=t,this.a=e}var nt={Arimo:!0,Cousine:!0,Tinos:!0};function ot(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}it.prototype.load=function(t){var e=new v,i=this.c,n=new K(this.a.api,this.a.text),o=this.a.families;!function(t,e){for(var i=e.length,n=0;n<i;n++){var o=e[n].split(":");3==o.length&&t.f.push(o.pop());var r="";2==o.length&&""!=o[1]&&(r=":"),t.a.push(o.join(r))}}(n,o);var r=new G(o);!function(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),o=n[0].replace(/\+/g," "),r=["n4"];if(2<=n.length){var a;if(a=[],s=n[1])for(var s,h=(s=s.split(",")).length,c=0;c<h;c++){var u;if((u=s[c]).match(/^[\w-]+$/))if(null==(p=et.exec(u.toLowerCase())))u="";else{if(u=null==(u=p[2])||""==u?"n":tt[u],null==(p=p[1])||""==p)p="4";else var l=Q[p],p=l||(isNaN(p)?"4":p.substr(0,1));u=[u,p].join("")}else u="";u&&a.push(u)}0<a.length&&(r=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=$[n[0]])&&(t.c[o]=n))}for(t.c[o]||(n=$[o])&&(t.c[o]=n),n=0;n<r.length;n+=1)t.a.push(new S(o,r[n]))}}(r),g(i,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(n),m(e)),w(e,function(){t(r.a,r.c,nt)})},ot.prototype.load=function(t){var e=this.a.id,i=this.c.o;e?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],o=0;o<e.length;o+=2)for(var r=e[o],a=e[o+1],s=0;s<a.length;s++)n.push(new S(r,a[s]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}},2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,i=this.c.o,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var o=0,r=i.fonts.length;o<r;++o){var a=i.fonts[o];n.a.push(new S(a.name,k("font-weight:"+a.weight+";font-style:"+a.style)))}t(n.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var at=new Y(window);at.a.c.custom=function(t,e){return new Z(e,t)},at.a.c.fontdeck=function(t,e){return new rt(e,t)},at.a.c.monotype=function(t,e){return new V(e,t)},at.a.c.typekit=function(t,e){return new ot(e,t)},at.a.c.google=function(t,e){return new it(e,t)};var st={load:a(at.load,at)};void 0===(n=function(){return st}.call(e,i,e,t))||(t.exports=n)}()},function(t,e,i){var n;t.exports=function t(e,i,o){function r(s,h){if(!i[s]){if(!e[s]){var c="function"==typeof n&&n;if(!h&&c)return n(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return r(i||t)},l,l.exports,t,e,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,i){e.exports=function(e){if("function"!=typeof Map||e){var i=t("./similar");return new i}return new Map}},{"./similar":2}],2:[function(t,e,i){function n(){return this.list=[],this.lastItem=void 0,this.size=0,this}n.prototype.get=function(t){var e;return this.lastItem&&this.isEqual(this.lastItem.key,t)?this.lastItem.val:(e=this.indexOf(t))>=0?(this.lastItem=this.list[e],this.list[e].val):void 0},n.prototype.set=function(t,e){var i;return this.lastItem&&this.isEqual(this.lastItem.key,t)?(this.lastItem.val=e,this):(i=this.indexOf(t))>=0?(this.lastItem=this.list[i],this.list[i].val=e,this):(this.lastItem={key:t,val:e},this.list.push(this.lastItem),this.size++,this)},n.prototype.delete=function(t){var e;if(this.lastItem&&this.isEqual(this.lastItem.key,t)&&(this.lastItem=void 0),(e=this.indexOf(t))>=0)return this.size--,this.list.splice(e,1)[0]},n.prototype.has=function(t){var e;return!(!this.lastItem||!this.isEqual(this.lastItem.key,t))||(e=this.indexOf(t))>=0&&(this.lastItem=this.list[e],!0)},n.prototype.forEach=function(t,e){var i;for(i=0;i<this.size;i++)t.call(e||this,this.list[i].val,this.list[i].key,this)},n.prototype.indexOf=function(t){var e;for(e=0;e<this.size;e++)if(this.isEqual(this.list[e].key,t))return e;return-1},n.prototype.isEqual=function(t,e){return t===e||t!=t&&e!=e},e.exports=n},{}]},{},[1])(1)},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,i){"use strict";i.r(e);var n,o=function(){function t(t,e,i,n){this.top=t,this.left=e,this.bottom=i,this.right=n}return t.prototype.height=function(){return this.top+this.bottom},t.prototype.width=function(){return this.left+this.right},t.prototype.scale=function(e){return new t(this.top*e,this.left*e,this.bottom*e,this.right*e)},t.even=function(e){return new t(e,e,e,e)},t}(),r=i(0),a=i.n(r),s={fontFamily:"Old Standard TT",fontStyle:"Normal",fontWeight:"400",fontSizes:[35,30,25],widthTiers:[670,500,300],testCanvasFontSizeMultiple:5,testCanvasWidth:800,restartAndProgressSize:28,restartAndProgressPadding:16,progressFill:"rgba(0, 0, 0, 0.06)",defaultVBoxPadding:0,defaultHBoxPadding:0,defaultTightHBoxPadding:0,defaultSubSuperPadding:o.even(0),defaultRootPadding:o.even(0),termPadding:new o(10,5,10,5),tightTermPadding:new o(5,2,5,2),hDividerPadding:new o(0,3,0,3),expScale:.575,defaultExpPortrusion:.1,rootArgMarginLeft:7,rootIndexScale:.5,rootKinkTipAngle:Math.PI/2,rootKinkTipLength:3,creatorContainerPadding:o.even(30),creatorHDividerPadding:new o(5,15,5,15),creatorSelectableHDividerPadding:new o(5,0,5,0),creatorContainerStroke:"rgb(225, 225, 225)",creatorCaretFillStyle:"#444",creatorCaretFillStyleLighter:"#999",creatorCaretSize:5,creatorLineDash:[2],creatorErrorTimeout:5e3,addDuration:700,addEasing:a()(0,0,.2,1),moveDuration:700,moveEasing:a()(.4,0,.2,1),removeDuration:400,removeEasing:a()(.4,0,1,1),progressEasing:a()(.4,0,.2,1),colors:{red:[229,57,53],pink:[216,27,96],purple:[142,36,170],blue:[30,136,229],teal:[0,137,123],green:[67,160,71],orange:[251,140,0],default:[0,0,0]},fadedOpacity:.3,normalOpacity:.6,focusedOpacity:.9},h=function(){function t(t){this.padding=t}return t.prototype.setWidth=function(t){this.width=t},t.prototype.setHeight=function(t){this.height=t},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getPadding=function(){return this.padding},t}(),c=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(t){function e(e,i){var n=t.call(this,e)||this;return n.interpColor=!0,n.ref=i,n}return c(e,t),e.prototype.setupCtx=function(t,e,i,n){var o=1-i,r=t.tlx*o+e.tlx*i,a=t.tly*o+e.tly*i,s=t.width*o+e.width*i,h=t.height*o+e.height*i,c=t.scale*o+e.scale*i;return n.translate(r+s/2,a+h/2),n.scale(c,c),this.setupCtxStyle(t,e,i,n),[s,h]},e.prototype.setupCtxStyle=function(t,e,i,n){if(0===i){var o=t.color,r=e.color;this.interpColor=o[0]!==r[0]||o[1]!==r[1]||o[2]!==r[2]||t.opacity!==e.opacity}var a=t.color,s=t.opacity;if(this.interpColor){var h=1-i,c=t.color[0]*h+e.color[0]*i,u=t.color[1]*h+e.color[1]*i,l=t.color[2]*h+e.color[2]*i,p=t.opacity*h+e.opacity*i;a=[Math.round(c),Math.round(u),Math.round(l)],s=p}this.setCtxStyle(n,a,s)},e.prototype.setCtxStyle=function(t,e,i){var n="rgba("+e[0]+","+e[1]+","+e[2]+","+i+")";t.fillStyle=n,t.strokeStyle=n},e.prototype.getColorForContent=function(t){return void 0!==t&&void 0!==t[this.ref]?s.colors[t[this.ref]]:s.colors.default},e.prototype.getOpacityForContent=function(t){return void 0!==t&&void 0!==t[this.ref]?t[this.ref]:s.normalOpacity},e.prototype.interpColorOff=function(){this.interpColor=!1},e.prototype.getRef=function(){return this.ref},e}(h),l=function(){function t(t,e,i,n,o,r,a){this.tlx=i,this.tly=n,this.width=o,this.height=r,this.component=e,this.layoutParent=t,this.scale=a}return t.prototype.contains=function(t,e){return t>=this.tlx&&t<=this.tlx+this.width&&e>=this.tly&&e<=this.tly+this.height},t.prototype.onLeft=function(t){return t<=this.tlx+this.width/2},t.prototype.onTop=function(t){return t<=this.tly+this.height/2},t.prototype.withZeroScale=function(){return new t(this.layoutParent,this.component,this.tlx,this.tly,this.width,this.height,0)},t}(),p=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),f=function(t){function e(e,i,n,o,r,a,s,h,c){var u=t.call(this,e,i,n,o,r,a,s)||this;return u.color=h,u.opacity=c,u}return p(e,t),e.prototype.withZeroScale=function(){return new e(this.layoutParent,this.component,this.tlx,this.tly,this.width,this.height,0,this.color,0)},e}(l),d=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=s.termPadding,e}return d(e,t),e.prototype.tighten=function(t){this.padding=s.tightTermPadding,this.width-=t},e.prototype.withZeroScale=function(){return new e(this.layoutParent,this.component,this.tlx,this.tly,this.width,this.height,0,this.color,0)},e}(f),y=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),v=function(t){function e(e,i,n,o,r){var a=t.call(this,s.termPadding,r)||this;return a.widths=i,a.heights=n,a.halfInnerWidths=a.widths.map(function(t){return t/2}),a.halfInnerHeights=a.heights.map(function(t){return t/2}),a.ascents=o,a.recalcDimensions(),window.addEventListener("resize",a.recalcDimensions.bind(a)),a.text=e,a}return y(e,t),e.prototype.recalcDimensions=function(){this.height=this.calcHeight(),this.width=this.calcWidth();var t=window.currentWidthTier;this.halfInnerWidth=this.halfInnerWidths[t],this.halfInnerHeight=this.halfInnerHeights[t],this.ascent=this.ascents[t]},e.prototype.calcHeight=function(){var t=window.currentWidthTier;return this.heights[t]+this.padding.height()},e.prototype.calcWidth=function(){var t=window.currentWidthTier;return this.widths[t]+this.padding.width()},e.prototype.addLayout=function(t,e,i,n,o,r,a){var s=new g(t,this,i,n,this.width*o,this.height*o,o,this.getColorForContent(a),this.getOpacityForContent(r));return e.set(this,s),s},e.prototype.draw=function(t,e,i,n){this.setupCtx(t,e,i,n),n.fillText(this.text,-this.halfInnerWidth,-this.halfInnerHeight+this.ascent)},e}(u),m=i(2),w=i.n(m);function x(t){if(t.font){if("c"===t.font.type)return[(e=t.font).name,e.style,e.weight];if("g"===t.font.type){var e,i=(e=t.font).name.split(":"),n=i[0];return i[1]?"i"===i[1].charAt(i[1].length-1)?[n,"italic",i[1].substring(0,i[1].length-1)]:[n,s.fontStyle,i[1]]:[n,s.fontStyle,s.fontWeight]}throw"Unrecognized custom font type"}return[s.fontFamily,s.fontStyle,s.fontWeight]}function _(t){for(var e=[],i=function(i){var n={};e.push(n),n.widths=[];var o=0,r=0;t.terms.forEach(function(e){var a=function(t,e,i){var n={},o=P(e),r=x(i),a=r[0],h=r[1],c=r[2],u=document.createElement("canvas");u.width=s.testCanvasWidth,u.height=o*s.testCanvasFontSizeMultiple;var l=u.getContext("2d");l.font=c+" "+h+" "+o+"px "+a,n.width=l.measureText(t).width,l.fillStyle="white",l.fillRect(0,0,u.width,u.height),l.fillStyle="black",l.fillText(t,0,u.height/2);var p=l.getImageData(0,0,n.width,u.height),f=p.data,d=0;for(;++d<f.length&&255===f[d];);var g=d/(4*p.width);d=f.length-1;for(;--d>0&&255===f[d];);var y=d/(4*p.width);return n.ascent=u.height/2-g,n.descent=y-u.height/2,n}(e,i,t);a.ascent>o&&(o=a.ascent),a.descent>r&&(r=a.descent),n.widths.push(a.width)}),n.ascent=o,n.height=o+r},n=0;n<s.widthTiers.length;n++)i(n);return e}var S=window.navigator.userAgent,b=S.indexOf("MSIE ")>-1||S.indexOf("Trident/")>-1||S.indexOf("Edge/")>-1;function C(t,e,i,n,o){o.beginPath(),o.moveTo(t,e),o.lineTo(i,n),o.stroke()}function O(t,e,i,n,o){var r=t-i/2,a=e-n/2;o.beginPath(),o.moveTo(r,a),o.lineTo(r+i,a),o.lineTo(t,a+n),o.lineTo(r,a),o.fill()}function k(){for(var t=window.innerWidth,e=0;e<s.widthTiers.length;e++)if(t>s.widthTiers[e])return e;return s.widthTiers.length-1}function P(t){return s.fontSizes[t]}window.currentWidthTier=k(),window.addEventListener("resize",function(){window.currentWidthTier=k()});var T="function"==typeof window.Map;var E,A,H=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),j=function(t){function e(e){return t.call(this,e)||this}return H(e,t),e.prototype.addClick=function(t,e,i,n){var o=t.layoutParent;if(o){var r=o.component;if(r.addVertically())t.onTop(i)?r.addBefore(n,this):r.addAfter(n,this);else{if(!r.addHorizontally())return;t.onLeft(e)?r.addBefore(n,this):r.addAfter(n,this)}}},e.prototype.creatorDraw=function(t,e){var i=t.layoutParent;if(i){var n=s.creatorContainerPadding.scale(t.scale),o=i.component;o.addVertically()?(e.save(),e.fillStyle=s.creatorCaretFillStyleLighter,e.save(),e.translate(t.tlx+t.width/2,t.tly+n.top/4),e.rotate(Math.PI),e.scale(t.scale,t.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,e),e.restore(),e.save(),e.translate(t.tlx+t.width/2,t.tly+t.height-n.bottom/4),e.scale(t.scale,t.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,e),e.restore(),e.restore()):o.addHorizontally()&&(e.save(),e.fillStyle=s.creatorCaretFillStyleLighter,e.save(),e.translate(t.tlx+n.left/4,t.tly+t.height/2),e.rotate(Math.PI/2),e.scale(t.scale,t.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,e),e.restore(),e.save(),e.translate(t.tlx+t.width-n.right/4,t.tly+t.height/2),e.rotate(-Math.PI/2),e.scale(t.scale,t.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,e),e.restore(),e.restore())}},e.childrenToStepLayout=function(t,i){var n=[];return t.forEach(function(t){if(t instanceof e)n.push(t.toStepLayout(i));else{if(!(t instanceof u))throw"unrecognized type "+typeof t;n.push(t.getRef())}}),n},e}(h),I=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),W=function(t){function e(e,i){var n=t.call(this,i)||this;return n.children=e,n}return I(e,t),e.prototype.addBefore=function(t,e){this.addValid(t);var i=this.children.indexOf(e);this.children.splice(i,0,t)},e.prototype.addAfter=function(t,e){this.addValid(t);var i=this.children.indexOf(e);this.children.splice(i+1,0,t)},e.prototype.forEachUnder=function(t){this.children.forEach(function(e){if(e instanceof u)t(e);else{if(!(e instanceof j))throw"unrecognized component type";e.forEachUnder(t)}})},e.prototype.delete=function(t){this.children.splice(this.children.indexOf(t),1)},e.prototype.getChildren=function(){return this.children},e}(j),L=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),z=function(t){function e(e,i,n,o,r,a,s,h,c,u,l){var p=t.call(this,e,i,n,o,r,a,s,h,c)||this;return p.origInnerWidth=u,p.origInnerHeight=l,p}return L(e,t),e.prototype.withZeroScale=function(){return new e(this.layoutParent,this.component,this.tlx,this.tly,this.width,this.height,0,this.color,0,this.origInnerWidth,this.origInnerHeight)},e}(f),M=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),D=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.height=1+n.padding.height(),n.width=0,n}return M(e,t),e.prototype.calcWidth=function(){return 0},e.prototype.calcHeight=function(){return 0},e.prototype.addLayout=function(t,e,i,n,o,r,a){var s=t.tlx,h=t.width,c=this.getHeight(),u=new z(t,this,s,n,h,c,o,this.getColorForContent(a),this.getOpacityForContent(r),h/o,c);return e.set(this,u),u},e.prototype.draw=function(t,e,i,n){this.setupCtx(t,e,i,n);var o=t.origInnerWidth*(1-i)+e.origInnerWidth*i;C(-o/2+this.padding.left,0,o/2-this.padding.right,0,n)},e}(u),N=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),R=function(t){function e(e){return t.call(this,o.even(0),e)||this}return N(e,t),e.prototype.calcWidth=function(){return 0},e.prototype.calcHeight=function(){return 0},e.prototype.draw=function(t,e,i,n){var o=t.layoutParent,r=e.layoutParent,a=1-i,s=o.kinkTipX*a+r.kinkTipX*i,h=o.kinkTipY*a+r.kinkTipY*i,c=o.kinkTopX*a+r.kinkTopX*i,u=o.kinkTopY*a+r.kinkTopY*i,l=o.tickBotX*a+r.tickBotX*i,p=o.tickBotY*a+r.tickBotY*i,f=o.tickTopX*a+r.tickTopX*i,d=o.tickTopY*a+r.tickTopY*i,g=o.endX*a+r.endX*i,y=o.endY*a+r.endY*i,v=t.origInnerWidth*a+e.origInnerWidth*i,m=t.origInnerHeight*a+e.origInnerHeight*i;this.setupCtx(t,e,i,n);var w=-v/2,x=-m/2;C(w+s,x+h,w+c,x+u,n),C(w+c,x+u,w+l,x+p,n),C(w+l,x+p,w+f,x+d,n),C(w+f,x+d,w+g,x+y,n)},e.prototype.addLayout=function(t,e,i,n,o,r,a){var s=t.component.getPadding().scale(o),h=s.width(),c=s.height(),u=new z(t,this,i+h/2,n+c/2,t.width-h,t.height-c,o,this.getColorForContent(a),this.getOpacityForContent(r),(t.width-h)/o,(t.height-c)/o);return e.set(this,u),u},e}(u),F=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),B=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.width=n.calcWidth(),n.height=n.calcHeight(),n}return F(e,t),e.prototype.calcHeight=function(){for(var t=0,e=0;e<this.children.length;e++){var i=this.children[e].getHeight();i>t&&(t=i)}return t+this.padding.height()},e.prototype.calcWidth=function(){for(var t=0,e=0;e<this.children.length;e++){t+=this.children[e].getWidth()}return t+this.padding.width()},e.prototype.addVertically=function(){return!1},e.prototype.addHorizontally=function(){return!0},e.prototype.creatorDraw=function(e,i){i.save(),i.strokeStyle=s.creatorContainerStroke,i.beginPath(),i.rect(e.tlx,e.tly,e.width,e.height),i.stroke();var n=s.creatorContainerPadding.scale(e.scale),o=e.tlx+n.left/2,r=e.tlx+e.width-n.right/2,a=e.tly+n.top/2,h=e.tly+e.height-n.bottom/2;C(o,a,r,a,i),C(o,h,r,h,i),i.fillStyle=s.creatorCaretFillStyle,i.save(),i.translate(e.tlx+.75*n.left,e.tly+e.height/2),i.rotate(-Math.PI/2),i.scale(e.scale,e.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,i),i.restore(),i.save(),i.translate(e.tlx+e.width-.75*n.right,e.tly+e.height/2),i.rotate(Math.PI/2),i.scale(e.scale,e.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,i),i.restore(),t.prototype.creatorDraw.call(this,e,i),i.restore()},e.prototype.addClick=function(e,i,n,o){var r=s.creatorContainerPadding.scale(e.scale),a=new l(void 0,void 0,e.tlx+r.left/2,e.tly+r.top/2,r.width()/4,e.height-r.height()/2,1),h=new l(void 0,void 0,e.tlx+e.width-r.right,e.tly+r.top/2,r.width()/4,e.height-r.height()/2,1);a.contains(i,n)?(this.addValid(o),this.children.unshift(o)):h.contains(i,n)?(this.addValid(o),this.children.push(o)):t.prototype.addClick.call(this,e,i,n,o)},e.prototype.addClickOnChild=function(t,e,i,n){this.addValid(n),t.onLeft(e)?this.addBefore(n,t.component):this.addAfter(n,t.component)},e.prototype.addValid=function(t){if(t instanceof D)throw new Error("Fraction lines can only be added inside a vertical container.");if(t instanceof R)throw new Error("Radicals can only be added inside a root container.")},e.prototype.toStepLayout=function(t){return{type:"hbox",children:j.childrenToStepLayout(this.children,t)}},e.prototype.addLayout=function(t,e,i,n,o,r,a){for(var s=new l(t,this,i,n,this.getWidth()*o,this.getHeight()*o,o),h=(this.getHeight()-this.padding.height())*o,c=i+this.padding.left*o,u=0;u<this.children.length;u++){var p=this.children[u],f=(h-p.getHeight()*o)/2+this.padding.top*o+n;c+=p.addLayout(s,e,c,f,o,r,a).width}return e.set(this,s),s},e}(W),X=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),U=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.width=n.calcWidth(),n.height=n.calcHeight(),n}return X(e,t),e.prototype.calcHeight=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].getHeight();return t+this.padding.height()},e.prototype.calcWidth=function(){for(var t=0,e=0;e<this.children.length;e++){var i=this.children[e].getWidth();i>t&&(t=i)}return t+this.padding.width()},e.prototype.addHorizontally=function(){return!1},e.prototype.addVertically=function(){return!0},e.prototype.creatorDraw=function(e,i){i.save(),i.strokeStyle=s.creatorContainerStroke,i.beginPath(),i.rect(e.tlx,e.tly,e.width,e.height),i.stroke();var n=s.creatorContainerPadding.scale(e.scale),o=e.tly+n.top/2,r=e.tly+e.height-n.bottom/2,a=e.tlx+n.left/2,h=e.tlx+e.width-n.right/2;C(a,o,a,r,i),C(h,o,h,r,i),i.fillStyle=s.creatorCaretFillStyle,i.save(),i.translate(e.tlx+e.width/2,e.tly+.75*n.top),i.scale(e.scale,e.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,i),i.restore(),i.save(),i.translate(e.tlx+e.width/2,e.tly+e.height-.75*n.top),i.rotate(Math.PI),i.scale(e.scale,e.scale),O(0,0,s.creatorCaretSize,s.creatorCaretSize,i),i.restore(),t.prototype.creatorDraw.call(this,e,i),i.restore()},e.prototype.addClick=function(e,i,n,o){var r=s.creatorContainerPadding.scale(e.scale),a=new l(void 0,void 0,e.tlx+r.left/2,e.tly+r.top/2,e.width-r.width()/2,r.height()/4,1),h=new l(void 0,void 0,e.tlx+r.left/2,e.tly+e.height-r.bottom,e.width-r.width()/2,r.height()/4,1);a.contains(i,n)?(this.addValid(o),this.children.unshift(o)):h.contains(i,n)?(this.addValid(o),this.children.push(o)):t.prototype.addClick.call(this,e,i,n,o)},e.prototype.addClickOnChild=function(t,e,i,n){this.addValid(n),t.onTop(i)?this.addBefore(n,t.component):this.addAfter(n,t.component)},e.prototype.addValid=function(t){if(t instanceof R)throw new Error("Radicals can only be added inside a root container.")},e.prototype.toStepLayout=function(t){return{type:"vbox",children:j.childrenToStepLayout(this.children,t)}},e.prototype.addLayout=function(t,e,i,n,o,r,a){for(var s=new l(t,this,i,n,this.getWidth()*o,this.getHeight()*o,o),h=(this.getWidth()-this.padding.width())*o,c=n+this.padding.top*o,u=0;u<this.children.length;u++){var p=this.children[u],f=(h-p.getWidth()*o)/2+this.padding.left*o+i;c+=p.addLayout(s,e,f,c,o,r,a).height}return e.set(this,s),s},e}(W),Y=function(){function t(t,e,i,n){this.animations=[],this.done=t,this.ctx=e,this.clearWidth=i,this.clearHeight=n}return t.prototype.addAnimation=function(t){this.animations.push(t)},t.prototype.start=function(){this.numRunning=this.animations.length;var t=this,e=function(i){t.ctx.clearRect(0,0,t.clearWidth,t.clearHeight),t.animations.forEach(function(t){t.run(i)}),t.numRunning>0&&requestAnimationFrame(e)};requestAnimationFrame(e)},t.prototype.finished=function(){this.numRunning--,0===this.numRunning&&this.done()},t}(),q=function(){function t(t,e,i){this.done=!1,this.startTime=-1,this.duration=t,this.easing=e,this.set=i}return t.prototype.run=function(t){if(this.done)this.step(1);else{if(-1===this.startTime)return this.startTime=t,void this.step(0);var e=t-this.startTime;e>=this.duration?(this.step(1),this.set.finished(),this.done=!0):this.step(this.easing(e/this.duration))}},t}(),V=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Z=function(t){function e(e,i,n,o,r,a,s){var h=t.call(this,e,i,n)||this;return h.before=o,h.after=r,h.component=a,h.ctx=s,h}return V(e,t),e.prototype.step=function(t){this.ctx.save(),this.component.draw(this.before,this.after,t,this.ctx),this.ctx.restore()},e}(q),K=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),J=function(t){function e(e,i,n,o,r){return t.call(this,r,s.moveEasing,n,e,i,i.component,o)||this}return K(e,t),e}(Z),G=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$=function(t){function e(e,i,n,o){return t.call(this,o,s.removeEasing,i,e,e.withZeroScale(),e.component,n)||this}return G(e,t),e}(Z),Q=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tt=function(t){function e(e,i,n,o){return t.call(this,o,s.addEasing,i,e.withZeroScale(),e,e.component,n)||this}return Q(e,t),e}(Z),et=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),it=function(t){function e(e,i,n,o,r){return t.call(this,r,s.moveEasing,n,e,i.withZeroScale(),e.component,o)||this}return et(e,t),e}(Z),nt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ot=function(t){function e(e,i,n,o,r){return t.call(this,r,s.moveEasing,n,e.withZeroScale(),i,i.component,o)||this}return nt(e,t),e}(Z),rt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),at=function(t){function e(e,i,n,o,r,a){var h=t.call(this,a,s.progressEasing,r)||this;return h.startCompletion=e/(n-1),h.endCompletion=i/(n-1),h.pi=o,h}return rt(e,t),e.prototype.step=function(t){var e=this.startCompletion*(1-t)+this.endCompletion*t;this.pi.draw(e)},e}(q),st=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ht=s.termPadding.width()-s.tightTermPadding.width(),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return st(e,t),e.prototype.toStepLayout=function(t){return{type:"tightHBox",children:j.childrenToStepLayout(this.children,t)}},e.prototype.calcWidth=function(){for(var t=0,e=0,i=0;i<this.children.length;i++){var n=this.children[i];t+=n.getWidth(),n instanceof v&&e++}return t+this.padding.width()-e*ht},e.prototype.addLayout=function(t,e,i,n,o,r,a){for(var s=new l(t,this,i,n,this.getWidth()*o,this.getHeight()*o,o),h=(this.getHeight()-this.padding.height())*o,c=i+this.padding.left*o,u=0;u<this.children.length;u++){var p=this.children[u],f=(h-p.getHeight()*o)/2+this.padding.top*o+n,d=p.addLayout(s,e,c,f,o,r,a);p instanceof v&&d.tighten(ht*o),c+=d.width}return e.set(this,s),s},e}(B),ut=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lt=function(t){function e(e,i,n,o,r){var a=t.call(this,r)||this;return a.portrusionProportion=o,a.top=e,a.middle=i,a.bottom=n,a.topPortrusion=a.top.getHeight()*s.expScale*a.portrusionProportion,a.bottomPortrusion=a.bottom.getHeight()*s.expScale*a.portrusionProportion,a.topPortrusion>a.bottomPortrusion?(a.topBlank=0,a.bottomBlank=a.topPortrusion-a.bottomPortrusion):(a.bottomBlank=0,a.topBlank=a.bottomPortrusion-a.topPortrusion),a.rightMiddleHeight=a.middle.getHeight()+a.topPortrusion+a.bottomPortrusion-(a.top.getHeight()*s.expScale+a.bottom.getHeight()*s.expScale),a.width=a.calcWidth(),a.height=a.calcHeight(),a}return ut(e,t),e.prototype.calcWidth=function(){var t=Math.max(this.top.getWidth()*s.expScale,this.bottom.getWidth()*s.expScale);return this.middle.getWidth()+t+this.padding.width()},e.prototype.calcHeight=function(){return this.middle.getHeight()+this.topPortrusion+this.topBlank+this.bottomPortrusion+this.bottomBlank+this.padding.height()},e.prototype.addLayout=function(t,e,i,n,o,r,a){var h=new l(t,this,i,n,this.getWidth()*o,this.getHeight()*o,o),c=this.middle.addLayout(h,e,i+this.padding.left*o,n+(this.topPortrusion+this.topBlank+this.padding.top)*o,o,r,a),u=c.tlx+c.width;return this.top.addLayout(h,e,u,n+(this.padding.top+this.topBlank)*o,o*s.expScale,r,a),this.bottom.addLayout(h,e,u,n+h.height-(this.padding.bottom+this.bottomBlank+this.bottom.getHeight()*s.expScale)*o,o*s.expScale,r,a),e.set(this,h),h},e.prototype.addVertically=function(){return!1},e.prototype.addHorizontally=function(){return!1},e.prototype.addBefore=function(t,e){},e.prototype.addAfter=function(t,e){},e.prototype.creatorDraw=function(e,i){i.save(),i.strokeStyle=s.creatorContainerStroke,i.beginPath(),i.rect(e.tlx,e.tly,e.width,e.height),i.stroke(),i.restore(),t.prototype.creatorDraw.call(this,e,i)},e.prototype.addClick=function(t,e,i,n){if(e-t.tlx<this.padding.left*t.scale){t.layoutParent.component.addClickOnChild(t,e,i,n)}else{if(!(t.tlx+t.width-e<this.padding.right*t.scale))return;t.layoutParent.component.addClickOnChild(t,e,i,n)}},e.prototype.addClickOnChild=function(t,e,i,n){},e.prototype.toStepLayout=function(t){var e={type:"subSuper",top:j.childrenToStepLayout(this.top.getChildren(),t),middle:j.childrenToStepLayout(this.middle.getChildren(),t),bottom:j.childrenToStepLayout(this.bottom.getChildren(),t)};return this.savePortrusionAs?(this.savePortrusionAs!==s.defaultExpPortrusion&&(e.portrusion=this.savePortrusionAs),this.savePortrusionAs=void 0):this.portrusionProportion!==s.defaultExpPortrusion&&(e.portrusion=this.portrusionProportion),e},e.prototype.delete=function(t){throw"Can't delete children from a SubSuper container."},e.prototype.forEachUnder=function(t){this.top.forEachUnder(t),this.middle.forEachUnder(t),this.bottom.forEachUnder(t)},e.prototype.savePortrusion=function(t){this.savePortrusionAs=t},e}(j),pt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ft=function(t){function e(e,i,n,o,r,a,s,h,c,u,l,p,f,d,g,y,v){var m=t.call(this,e,i,n,o,r,a,s)||this;return m.kinkTipX=h,m.kinkTipY=c,m.kinkTopX=u,m.kinkTopY=l,m.tickBotX=p,m.tickBotY=f,m.tickTopX=d,m.tickTopY=g,m.endX=y,m.endY=v,m}return pt(e,t),e.prototype.withZeroScale=function(){return new e(this.layoutParent,this.component,this.tlx,this.tly,this.width,this.height,0,this.kinkTipX,this.kinkTipY,this.kinkTopX,this.kinkTopY,this.tickBotX,this.tickBotY,this.tickTopX,this.tickTopY,this.endX,this.endY)},e}(l),dt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gt=function(t){function e(e,i,n,o,r){var a=t.call(this,o)||this;a.index=e,a.argument=i,a.radical=n,a.padBottom=s.termPadding.bottom/2,r+=s.termPadding.height(),a.indexHeight=r*s.rootIndexScale,a.kinkHeight=r-a.padBottom-a.indexHeight,a.indexTopOverflow=e.getHeight()*s.rootIndexScale-a.indexHeight,a.indexTopOverflow=Math.max(a.indexTopOverflow,0),a.emptySpaceAboveIndex=i.getHeight()-a.kinkHeight-a.indexHeight,a.emptySpaceAboveIndex=Math.max(a.emptySpaceAboveIndex,0);var h=Math.atan(r/s.rootArgMarginLeft),c=a.kinkHeight/Math.tan(h),u=Math.PI-h-Math.PI/2,l=s.rootKinkTipAngle-u;a.kinkTipWidth=s.rootKinkTipLength*Math.sin(l),a.kinkWidth=c+a.kinkTipWidth,a.kinkTipHeight=s.rootKinkTipLength*Math.cos(l),a.yToKinkStart=a.indexTopOverflow+a.emptySpaceAboveIndex+a.indexHeight+a.kinkTipHeight-a.padBottom;var p=a.kinkHeight/Math.tan(h),f=a.kinkWidth+p,d=e.getWidth()*s.rootIndexScale;return a.indexLeftOverflow=d-f,a.width=a.calcWidth(),a.height=a.calcHeight(),a}return dt(e,t),e.prototype.calcWidth=function(){return Math.max(this.indexLeftOverflow,0)+this.kinkWidth+s.rootArgMarginLeft+this.argument.getWidth()+this.padding.width()},e.prototype.calcHeight=function(){return 2*this.indexTopOverflow+this.argument.getHeight()+this.padding.height()},e.prototype.addLayout=function(t,e,i,n,o,r,a){var h,c=this.padding.scale(o),u=Math.max(this.indexLeftOverflow,0),l=u,p=this.yToKinkStart,f=l+this.kinkTipWidth,d=p-this.kinkTipHeight,g=u+this.kinkWidth,y=d+this.kinkHeight,v=g+s.rootArgMarginLeft,m=y-this.argument.getHeight()+1+this.padBottom,w=v+this.argument.getWidth(),x=m,_=this.getWidth()*o,S=this.getHeight()*o,b=new ft(t,this,i,n,_,S,o,l,p,f,d,g,y,v,m,w,x);h=this.indexLeftOverflow<0?i-this.indexLeftOverflow/2*o:i,h+=c.left-1*o;var C=n+(this.emptySpaceAboveIndex-1-this.padBottom)*o+c.top;this.index.addLayout(b,e,h,C,o*s.rootIndexScale,r,a);var O=i+(u+this.kinkWidth+s.rootArgMarginLeft)*o+c.left,k=n+this.indexTopOverflow*o+c.top;return this.argument.addLayout(b,e,O,k,o,r,a),this.radical&&this.radical.addLayout(b,e,i,n,o,r,a),e.set(this,b),b},e.prototype.addClick=function(e,i,n,o){var r=s.creatorContainerPadding.scale(e.scale);if(new l(void 0,void 0,e.tlx+r.left,e.tly+r.top,e.width-r.width(),e.height-r.height(),1).contains(i,n)){if(!(o instanceof R))throw new Error("Only Radicals can be added to a Root Container.");this.radical=o}else t.prototype.addClick.call(this,e,i,n,o)},e.prototype.creatorDraw=function(e,i){i.save(),i.strokeStyle=s.creatorContainerStroke,i.beginPath(),i.rect(e.tlx,e.tly,e.width,e.height),i.stroke(),i.restore(),t.prototype.creatorDraw.call(this,e,i)},e.prototype.addClickOnChild=function(t,e,i,n){},e.prototype.toStepLayout=function(t){var e={type:"root"};return e.idx=j.childrenToStepLayout(this.index.getChildren(),t),e.arg=j.childrenToStepLayout(this.argument.getChildren(),t),this.radical&&(e.rad=this.radical.getRef()),e},e.prototype.delete=function(t){t===this.radical&&(this.radical=void 0)},e.prototype.forEachUnder=function(t){this.index.forEachUnder(t),this.argument.forEachUnder(t),this.radical&&t(this.radical)},e.prototype.setRadical=function(t){this.radical=t},e.prototype.addVertically=function(){return!1},e.prototype.addHorizontally=function(){return!1},e.prototype.addBefore=function(t,e){},e.prototype.addAfter=function(t,e){},e}(j),yt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vt=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.totalChildHeight=0,n.children.forEach(function(t){n.totalChildHeight+=t.getHeight()}),n}return yt(e,t),e.prototype.addLayout=function(t,e,i,n,o,r,a){for(var s=new l(t,this,i,n,this.getWidth()*o,this.getHeight()*o,o),h=(this.getWidth()-this.padding.width())*o,c=n+this.padding.top*o+(this.getHeight()-this.totalChildHeight)/2,u=0;u<this.children.length;u++){var p=this.children[u],f=(h-p.getWidth()*o)/2+this.padding.left*o+i;c+=p.addLayout(s,e,f,c,o,r,a).height}return e.set(this,s),s},e}(U),mt=function(){function t(t){this.ctx=t.getContext("2d")}return t.prototype.getEnd=function(e){var i=e*Math.PI*2,n=t.RADIUS;return[n*Math.sin(i)+t.CENTER,-n*Math.cos(i)+t.CENTER]},t.prototype.draw=function(e){this.ctx.clearRect(0,0,t.DIMEN,t.DIMEN),this.ctx.fillStyle=s.progressFill,this.ctx.beginPath(),this.ctx.moveTo(t.CENTER,t.CENTER),this.ctx.lineTo(t.CENTER,t.START_Y),this.ctx.arc(t.CENTER,t.CENTER,t.RADIUS,-Math.PI/2,2*Math.PI*e-Math.PI/2),this.ctx.lineTo(t.CENTER,t.CENTER),this.ctx.fill()},t.RADIUS=s.restartAndProgressSize/2,t.CENTER=(s.restartAndProgressPadding+s.restartAndProgressSize)/2,t.RIGHT_X=t.RADIUS+t.CENTER,t.START_Y=t.CENTER-t.RADIUS,t.DIMEN=s.restartAndProgressPadding+s.restartAndProgressSize,t}(),wt=function(){function t(t,e){var i;this.currStep=0,this.animating=!1,this.lastHeight=0,this.lastWidth=0,this.container=t,this.steps=e.steps,this.stepOptions=e.stepOpts,this.terms=[],this.hDividers=[],this.radicals=[],this.setSize=this.setSize.bind(this),this.startAutoplay=this.startAutoplay.bind(this),this.isAutoplay=e.autoplay;var n=document.createElement("div");if(n.className="eqUpper",this.container.appendChild(n),this.steps.length>1&&!this.isAutoplay){var o=document.createElement("div");o.className="material-icons eqIcon",o.innerHTML="arrow_back",n.appendChild(o),this.prevStep=this.prevStep.bind(this),o.addEventListener("click",this.prevStep)}for(var r=0;r<this.steps.length;r++){if(this.steps[r].text){this.textArea=document.createElement("div"),this.textArea.className="eqText",n.appendChild(this.textArea);break}}if(this.steps.length>1&&!this.isAutoplay){var a=document.createElement("div");a.className="material-icons eqIcon restartIcon",a.innerHTML="replay",n.appendChild(a),this.restart=this.restart.bind(this),a.addEventListener("click",this.restart);var s=document.createElement("canvas");s.className="progressCanvas",s.setAttribute("height",mt.DIMEN+""),s.setAttribute("width",mt.DIMEN+""),this.progress=new mt(s),n.appendChild(s)}var h=document.createElement("div");if(h.className="canvas-container",this.container.appendChild(h),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),h.appendChild(this.canvas),t.hasAttribute("data-fix-height")&&(this.fixedHeights=e.maxHeights),i=x(e),this.fontFamily=i[0],this.fontStyle=i[1],this.fontWeight=i[2],this.initContent(e),this.updateFontSize(),this.recalc(),this.isAutoplay||(this.nextStep=this.nextStep.bind(this),this.canvas.addEventListener("click",this.nextStep),this.textArea&&this.textArea.addEventListener("click",this.nextStep)),this.recalc=this.recalc.bind(this),window.addEventListener("resize",this.updateFontSize.bind(this)),window.addEventListener("resize",this.recalc),this.isAutoplay){this.overlayContainer=document.createElement("div"),this.overlayContainer.className="overlayContainer",this.overlayContainer.addEventListener("click",this.startAutoplay);var c=document.createElement("span");c.className="material-icons playButton",c.innerHTML="play_arrow",this.overlayContainer.appendChild(c),t.appendChild(this.overlayContainer)}}return t.prototype.startAutoplay=function(){this.overlayContainer.style.display="none",this.autoplay()},t.prototype.autoplay=function(){var t=this;this.currStep>=this.steps.length-1?setTimeout(function(){t.stopAutoplay(),t.currStep=0,t.recalc()},this.getAutoplayDelay(this.steps.length-1)):setTimeout(function(){t.nextStep(function(){t.autoplay()})},this.getAutoplayDelay(this.currStep))},t.prototype.stopAutoplay=function(){this.overlayContainer.style.display="block"},t.prototype.getAutoplayDelay=function(t){return this.isAutoplay.delays&&this.isAutoplay.delays[t]?this.isAutoplay.delays[t]:0},t.prototype.updateFontSize=function(){this.fontSize=P(window.currentWidthTier)},t.prototype.redraw=function(){var t=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currStates.forEach(function(e){t.ctx.save(),e.component instanceof u&&(e.component.interpColorOff(),e.component.draw(e,e,0,t.ctx)),t.ctx.restore()})},t.prototype.recalc=function(){var t,e;t=this.calcLayout(this.currStep),this.currStates=t[0],e=t[1];var i=this.getSize(e),n=i[0],o=i[1];this.setSize(n,o),this.redraw()},t.prototype.nextStep=function(t){var e;if(!(this.currStep+1>=this.steps.length||this.animating)){this.currStep++;var i,n=this.currStates;e=this.calcLayout(this.currStep),this.currStates=e[0],i=e[1];var o=this.getSize(i),r=o[0],a=o[1],s=this.diff(n,r,a,this.currStep-1,this.currStep,t instanceof Function?t:void 0);this.animating=!0,s.start()}},t.prototype.prevStep=function(){var t;if(!(this.currStep-1<0||this.animating)){this.currStep--;var e,i=this.currStates;t=this.calcLayout(this.currStep),this.currStates=t[0],e=t[1];var n=this.getSize(e),o=n[0],r=n[1],a=this.diff(i,o,r,this.currStep+1,this.currStep,void 0);this.animating=!0,a.start()}},t.prototype.restart=function(){var t;if(!this.animating){var e=this.currStep;this.currStep=0;var i,n=this.currStates;t=this.calcLayout(this.currStep),this.currStates=t[0],i=t[1];var o=this.getSize(i),r=o[0],a=o[1],s=this.diff(n,r,a,e,0,void 0);this.animating=!0,s.start()}},t.prototype.forAllContent=function(t){this.terms.forEach(function(e){t(e)}),this.hDividers.forEach(function(e){t(e)}),this.radicals.forEach(function(e){t(e)})},t.prototype.diff=function(t,e,i,n,o,r){var a=this,h=i<this.lastHeight;if(!h&&(this.setSize(e,i),b)){var c=this.currStates;this.currStates=t,this.redraw(),this.currStates=c}var u,l,p=new Y(function(){h&&(a.setSize(e,i),a.redraw()),a.animating=!1,r&&r()},this.ctx,this.lastWidth,this.lastHeight);n<o?(u=this.getStepOptions(n,o),l=!1):(u=this.getStepOptions(o,n),l=!0);var f,d,g=function(t){return u&&u.merges&&u.merges[t]},y=function(t){return u&&u.clones&&u.clones[t]},v=function(t){return u&&u.evals&&u.evals[t]},m=u&&u.moveDuration?u.moveDuration:s.moveDuration;l?(f=u&&u.removeDuration?u.removeDuration:s.removeDuration,d=u&&u.addDuration?u.addDuration:s.addDuration):(f=u&&u.addDuration?u.addDuration:s.addDuration,d=u&&u.removeDuration?u.removeDuration:s.removeDuration);var w=Math.max(m,f,d),x=function(t,e){var i=this.getContentFromRef(t),n=this.currStates.get(i);p.addAnimation(new J(e,n,p,this.ctx,m))}.bind(this),_=function(e,i){var n=this.getContentFromRef(e),o=t.get(n);p.addAnimation(new J(o,i,p,this.ctx,m))}.bind(this),S=function(t,e){var i=this.getContentFromRef(t),n=this.currStates.get(i);p.addAnimation(new it(e,n,p,this.ctx,m))}.bind(this),C=function(e,i){var n=this.getContentFromRef(e),o=t.get(n);p.addAnimation(new ot(o,i,p,this.ctx,m))}.bind(this);return this.progress&&p.addAnimation(new at(n,o,this.steps.length,this.progress,p,w)),this.forAllContent(function(e){var i=void 0;void 0!==t&&(i=t.get(e));var n=a.currStates.get(e),o=e.getRef();i&&n?p.addAnimation(new J(i,n,p,a.ctx,m)):i?g(o)?x(u.merges[o],i):v(o)?S(u.evals[o],i):l&&y(o)?x(u.clones[o],i):p.addAnimation(new $(i,p,a.ctx,d)):n&&(y(o)?_(u.clones[o],n):l&&g(o)?_(u.merges[o],n):l&&v(o)?C(u.evals[o],n):p.addAnimation(new tt(n,p,a.ctx,f)))}),p},t.prototype.getSize=function(t){var e=t.height,i=t.width,n=this.container.clientWidth;return[i>n?i:n,e]},t.prototype.setSize=function(t,e){if(t!==this.lastWidth||e!==this.lastHeight){this.canvas.style.width=t+"px",this.canvas.style.height=e+"px";var i=window.devicePixelRatio||1;this.canvas.width=t*i,this.canvas.height=e*i,this.ctx.scale(i,i),this.ctx.font=this.fontWeight+" "+this.fontStyle+" "+this.fontSize+"px "+this.fontFamily,this.lastHeight=e,this.lastWidth=t}},t.prototype.initContent=function(t){this.termHeights=[];var e=[];if(t.terms.length>0)for(var i=0;i<s.widthTiers.length;i++)this.termHeights.push(t.metrics[i].height),e.push(t.metrics[i].ascent);for(var n=0;n<t.terms.length;n++){var o=[];for(i=0;i<s.widthTiers.length;i++)o.push(t.metrics[i].widths[n]);var r=t.terms[n],a=new v(r,o,this.termHeights,e,"t"+n);this.terms.push(a)}for(var h=0;h<t.hDividers;h++)this.hDividers.push(new D(s.hDividerPadding,"h"+h));for(h=0;h<t.radicals;h++)this.radicals.push(new R("r"+h))},t.prototype.getContentFromRef=function(t){var e=t.substring(0,1),i=parseFloat(t.substring(1,t.length));if("t"===e)return this.terms[i];if("h"===e)return this.hDividers[i];if("r"===e)return this.radicals[i];throw"unrecognized content type"},t.prototype.getStepOptions=function(t,e){if(this.stepOptions&&e-t==1)return this.stepOptions[e-1]},t.prototype.calcLayout=function(t){var e=this.steps[t].root,i=this.parseContainer(e,0),n=this.container.clientWidth;if(i.getWidth()<n&&i.setWidth(n),this.fixedHeights){var o=this.fixedHeights[window.currentWidthTier];i.setHeight(o)}this.textArea&&(this.textArea.innerHTML=this.steps[t].text?this.steps[t].text:"");var r=this.steps[t].color,a=this.steps[t].opacity,s=T?new window.Map:new w.a;return[s,i.addLayout(void 0,s,0,0,1,a,r)]},t.prototype.parseContainer=function(t,e){var i=t.type;if("vbox"===i){var n=this.parseContainerChildren(t.children,e+1),r=o.even(s.defaultVBoxPadding);return this.fixedHeights&&0===e?new vt(n,r):new U(n,r)}if("hbox"===i)return new B(this.parseContainerChildren(t.children,e+1),o.even(s.defaultHBoxPadding));if("tightHBox"===i)return new ct(this.parseContainerChildren(t.children,e+1),o.even(s.defaultTightHBoxPadding));if("subSuper"===i){var a=t,h=new B(this.parseContainerChildren(a.top,e+1),o.even(0)),c=new ct(this.parseContainerChildren(a.middle,e+1),o.even(0)),u=new B(this.parseContainerChildren(a.bottom,e+1),o.even(0)),l=a.portrusion?a.portrusion:s.defaultExpPortrusion;return new lt(h,c,u,l,s.defaultSubSuperPadding)}if("root"===i){a=t;var p=new B(this.parseContainerChildren(a.idx,e+1),o.even(0)),f=new B(this.parseContainerChildren(a.arg,e+1),o.even(0)),d=void 0;return a.rad&&(d=this.getContentFromRef(a.rad)),new gt(p,f,d,s.defaultRootPadding,this.termHeights[k()])}throw void 0===i?"Invalid JSON File: Missing type attribute on container descriptor.":"Invalid JSON File: Unrecognized type: "+i},t.prototype.parseContainerChildren=function(t,e){var i=this,n=[];return t.forEach(function(t){if("object"==typeof t)n.push(i.parseContainer(t,e+1));else{if("string"!=typeof t)throw"Invalid type of child in JSON file.";n.push(i.getContentFromRef(t))}}),n},t}(),xt=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_t=function(t){function e(e){return t.call(this,document.createElement("div"),e)||this}return xt(e,t),e.prototype.getMaxHeight=function(t){var e=window;e.currentWidthTier=t,this.terms.forEach(function(t){t.recalcDimensions()});for(var i=0,n=0;n<this.steps.length;n++){var o=this.calcLayout(n)[1];o.height>i&&(i=o.height)}return e.currentWidthTier=k(),i},e.prototype.compute=function(){for(var t=[],e=0;e<s.widthTiers.length;e++)t.push(this.getMaxHeight(e));return t},e}(wt),St=i(1);E=document.createElement("style"),A="",Object.keys(s.colors).forEach(function(t){var e=s.colors[t];A+="."+t+" { color: rgb("+e[0]+","+e[1]+","+e[2]+")}"}),E.appendChild(document.createTextNode(A)),document.head.appendChild(E);var bt,Ct={type:"g",name:s.fontFamily+":"+s.fontWeight};function Ot(t){var e=document.createElement("style"),i="@font-face {font-family: "+t.name+";font-style: "+t.style+";font-weight: "+t.weight+";src: url("+t.src+");}";e.appendChild(document.createTextNode(i)),document.head.appendChild(e);var n=t.name+":";if("normal"===t.style)n+="n";else{if("italic"!==t.style)throw"Unrecognized custom font style";n+="i"}return n+=t.weight}function kt(t,e){e.metrics||(e.metrics=_(e)),t.hasAttribute("data-fix-height")&&!e.maxHeights&&(e.maxHeights=new _t(e).compute()),new wt(t,e)}"undefined"!=typeof self&&self,bt=function(){return function(t,e){if("string"==typeof t)!function(t){for(var e=document.getElementsByClassName(t),i=[],n=e.length,o=0,r=0;r<e.length;r++){var a=e[r];a.hasAttribute("data-src")?(h(r,a.getAttribute("data-src")),o++):h(r,"anim"+(r-o)+".json")}function s(){for(var t=0;t<e.length;t++)kt(e[t],i[t])}function h(t,e){var o=new XMLHttpRequest;o.addEventListener("load",function(){var e=JSON.parse(this.responseText);i[t]=e,0==--n&&function(){var t={};i.forEach(function(e){var i;i=e.font?e.font:Ct,t[JSON.stringify(i)]=!0});var e=Object.keys(t).map(function(t){return JSON.parse(t)}),n={active:s,inactive:s};e.forEach(function(t){var e=t.type;if("g"===e){var i=t;n.google||(n.google={families:[]}),n.google.families.push(i.name)}else{if("c"!==e)throw"unrecognized custom font type";var o=Ot(t);n.custom||(n.custom={},n.custom.families=[]),n.custom.families.push(o)}}),St.load(n)}()}),o.open("GET",e),o.send()}}(t);else{if(!("object"==typeof t&&t instanceof HTMLElement))throw new Error("Invalid first argument. Pass either a class name representing all containers to load, or an HTML Element that will become the container.");!function(t,e){var i,n=function(){kt(t,i)},o=function(){var t;if(i.font)if("c"===i.font.type)t={custom:{families:[Ot(i.font)]}};else{if("g"!==i.font.type)throw new Error("Unrecognized font type.");t={google:{families:[i.font.name]}}}else t={google:{families:[Ct.name]}};t.active=n,t.inactive=n,St.load(t)};if("object"==typeof e)i=e,o();else{var r=e||t.getAttribute("data-src");if(!r)throw new Error("If a URL is not passed to loadEqContainer, it must be specified on the element via the data-src attribute.");var a=new XMLHttpRequest;a.addEventListener("load",function(){i=JSON.parse(this.responseText),o()}),a.open("GET",r),a.send()}}(t,e)}}},"function"==typeof define&&i(3)?define("loadEqContainer",[],bt):window.loadEqContainer=bt()}]);